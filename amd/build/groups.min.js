function _typeof(obj){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},_typeof(obj)}define("tool_thi_learning_companions/groups",["exports","jquery","core/str","core/modal_factory","core_form/dynamicform","local_thi_learning_companions/jquery.dataTables"],(function(_exports,_jquery,str,ModalFactory,_dynamicform,_jquery2){function _getRequireWildcardCache(nodeInterop){if("function"!=typeof WeakMap)return null;var cacheBabelInterop=new WeakMap,cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function(nodeInterop){return nodeInterop?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule)return obj;if(null===obj||"object"!==_typeof(obj)&&"function"!=typeof obj)return{default:obj};var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj))return cache.get(obj);var newObj={},hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj)if("default"!==key&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;desc&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}return newObj.default=obj,cache&&cache.set(obj,newObj),newObj}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg),value=info.value}catch(error){return void reject(error)}info.done?resolve(value):Promise.resolve(value).then(_next,_throw)}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(void 0)}))}}function _init(){return(_init=_asyncToGenerator(regeneratorRuntime.mark((function _callee(){return regeneratorRuntime.wrap((function(_context){for(;;)switch(_context.prev=_context.next){case 0:setUpDataTable(),(0,_jquery.default)("body").on("click",".js-delete-group",handleGroupDelete);case 2:case"end":return _context.stop()}}),_callee)})))).apply(this,arguments)}function setUpDataTable(){return _setUpDataTable.apply(this,arguments)}function _setUpDataTable(){return(_setUpDataTable=_asyncToGenerator(regeneratorRuntime.mark((function _callee2(){var translationURL;return regeneratorRuntime.wrap((function(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:return _context2.next=2,str.get_string("datatables_url","tool_thi_learning_companions");case 2:translationURL=_context2.sent,(0,_jquery.default)("#allgroupstable").DataTable({language:{url:translationURL}});case 4:case"end":return _context2.stop()}}),_callee2)})))).apply(this,arguments)}function handleGroupDelete(){return _handleGroupDelete.apply(this,arguments)}function _handleGroupDelete(){return(_handleGroupDelete=_asyncToGenerator(regeneratorRuntime.mark((function _callee3(){var confirmTitle,groupId,modal,formContainer,form;return regeneratorRuntime.wrap((function(_context3){for(;;)switch(_context3.prev=_context3.next){case 0:return _context3.next=2,str.get_string("deletegroupconfirmtitle","tool_thi_learning_companions");case 2:return confirmTitle=_context3.sent,groupId=(0,_jquery.default)(this).data("groupid"),_context3.next=6,ModalFactory.create({title:confirmTitle,body:'<div class="js-form-wrapper"></div>',large:!1});case 6:return(modal=_context3.sent).show(),formContainer=document.querySelector(".js-form-wrapper"),form=new _dynamicform.default(formContainer,"\\tool_thi_learning_companions\\forms\\confirm_delete_group"),_context3.next=12,form.load({groupId:groupId});case 12:form.addEventListener(form.events.FORM_SUBMITTED,(function(){window.location.reload()})),form.addEventListener(form.events.FORM_CANCELLED,(function(){modal.destroy()}));case 14:case"end":return _context3.stop()}}),_callee3,this)})))).apply(this,arguments)}Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.init=function(){return _init.apply(this,arguments)},_jquery=_interopRequireDefault(_jquery),str=_interopRequireWildcard(str),ModalFactory=_interopRequireWildcard(ModalFactory),_dynamicform=_interopRequireDefault(_dynamicform)}));

//# sourceMappingURL=groups.min.js.map